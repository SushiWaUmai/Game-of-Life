(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{1105:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(2739)}])},2739:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return W}});var r,o,i,a=t(3010),u=(t(5170),t(586)),s=["w","s","a","d"],c={w:!1,s:!1,a:!1,d:!1};function l(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function f(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,i=[],a=!0,u=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);a=!0);}catch(s){u=!0,o=s}finally{try{a||null==t.return||t.return()}finally{if(u)throw o}}return i}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return l(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return l(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var d,h,m,p,b,v=128,x=128,g=!0,w=[246/255,192/255,208/255,1],k=[15/255,26/255,25/255,1],y=[42/255,.2,60/255,1],j=[0,0],N=1,E=[0,0,-1,-1],_=function(e,n,t,r){return[Math.floor((e/n*N+j[0])*v),Math.floor(((1-t/r)*N+j[1])*x)]},C=function(e,n,t,r){return[Math.floor(((e+1)/v-j[0])/N*n),Math.floor((1-((t+1)/x-j[1])/N)*r)]},T=function(e,n){return e+n*v},R=function(e,n,t){return e+n*t},S=function(){d=o()},P=function(){d=i()},U=function(){d=r(d,v,x)},A=function(){j=[0,0],N=1,M()},M=function(){E=[0,0,-1,-1]},O=function(){g=!g},L=function(e){for(var n=f(E,4),t=n[0],r=n[1],o=n[2],i=n[3],a=r;a<=i;a++)for(var u=t;u<=o;u++)d[T(u,a)]=e},X=function(e){var n=f(_(e.mouseX,e.width,e.mouseY,e.height),2);!function(e,n){if(b){for(var t=e+b.width-1,r=n+b.height-1,o=n;o<=r;o++)for(var i=e;i<=t;i++)d[T(i,o)]=b.cells[R(i-e,o-n,b.width)];E=[e,n,t,r]}}(n[0],n[1])},Y=function(e,n,t){var r=Math.exp(.2*e),o=N*r,i=N-o,a=j[0]+n*i,u=j[1]+t*i;j=[a,u],N=o},I=function(e){var n=0;e.preload=function(){h=e.loadShader("shaders/draw.vert","shaders/draw.frag")},e.setup=function(){var n=(m=e.createCanvas(e.windowHeight,e.windowHeight,e.WEBGL)).elt;n.addEventListener("contextmenu",(function(e){return e.preventDefault()}));var t=n.getContext("webgl");t&&(t.disable(t.DEPTH_TEST),e.pixelDensity(1),function(e,n){var t=new u.GPU;r=t.createKernel((function(e,n,t){for(var r=this.thread.x,o=r%n,i=Math.floor(r/n),a=e[r],u=0,s=-1;s<=1;s++)for(var c=-1;c<=1;c++)u+=e[(o+s+n)%n+(i+c+t)%t*n];if(u-=a,0!=a){if(u<2||u>3)return 0}else if(3===u)return 1;return a})).setOutput([e*n]),o=t.createKernel((function(){return 0})).setOutput([e*n]),i=t.createKernel((function(){return Math.random()>.5?1:0})).setOutput([e*n])}(v,x),p=e.createGraphics(v,x),m.getTexture(p).setInterpolation(e.NEAREST,e.NEAREST),e.background(0),e.fill(255),P(),e.frameRate(60))},e.keyPressed=function(){t(),function(e){s.includes(e.key)&&(c[e.key]=!0)}(e)},e.keyReleased=function(){!function(e){s.includes(e.key)&&(c[e.key]=!1)}(e)},e.mouseWheel=function(n){var t=n.deltaY>0?1:-1;Y(t,e.mouseX/e.width,1-e.mouseY/e.height)},e.mousePressed=function(){if(e.mouseButton===e.CENTER){var n=f(_(e.mouseX,e.width,e.mouseY,e.height),2),t=n[0],r=n[1];E=[t,r,t,r]}},e.mouseDragged=function(){if(e.mouseButton===e.CENTER){var n=f(_(e.mouseX,e.width,e.mouseY,e.height),2),t=n[0],r=n[1],o=f(E,2),i=o[0],a=o[1];E=(E=[i,a,t,r]).map((function(e){return Math.max(Math.min(e,127),0)}))}},e.mouseReleased=function(){if(e.mouseButton===e.CENTER){var n=f(E,4),t=n[0],r=n[1],o=n[2],i=n[3];t>o&&(E=[o,r,t,i]),r>i&&(E=[t,i,o,r])}};var t=function(){switch(e.key){case" ":O();break;case"r":S();break;case"k":A();break;case"b":M();break;case"Enter":U();break;case"e":L(0);break;case"f":L(1);break;case"c":!function(){for(var e=f(E,4),n=e[0],t=e[1],r=e[2],o=e[3],i=r-n+1,a=o-t+1,u=new Float32Array(i*a),s=t;s<=o;s++)for(var c=n;c<=r;c++)u[R(c-n,s-t,i)]=d[T(c,s)];b={width:i,height:a,cells:u}}();break;case"v":X(e)}},a=function(){e.background(0),p.loadPixels();for(var n=0;n<x;n++)for(var t=0;t<v;t++){var r=255*d[T(t,n)];p.set(t,n,[r,r,r,255])}p.updatePixels(),e.shader(h),h.setUniform("_cells",p),h.setUniform("_gridSize",[e.width/v,e.height/x]),h.setUniform("_resolution",[e.width,e.height]),h.setUniform("_enabledColor",w),h.setUniform("_disabledColor",k),h.setUniform("_gridColor",y),h.setUniform("_gridThickness",1),h.setUniform("_offset",j),h.setUniform("_scale",N),e.quad(-1,-1,1,-1,1,1,-1,1),p.remove(),e.resetShader();var o,i=f(E,4),a=i[0],u=i[1],s=i[2],c=i[3];o=f(function(e,n,t,r,o,i){var a,u;return[e=(a=f(C(e-1,o,n-1,i).map((function(e){return e-o/2})),2))[0],n=a[1],t=(u=f(C(t,o,r,i).map((function(e){return e-i/2})),2))[0],r=u[1]]}(a,u,s,c,e.width,e.height),4),a=o[0],u=o[1],s=o[2],c=o[3],e.stroke(255),e.strokeWeight(3),e.line(a,u,s,u),e.line(s,u,s,c),e.line(s,c,a,c),e.line(a,c,a,u)};e.draw=function(){g&&(n+=e.deltaTime/1e3)>.2&&(U(),n=0),function(){if(e.mouseIsPressed&&e.mouseX<e.width&&e.mouseY<e.height){var n=f(_(e.mouseX,e.width,e.mouseY,e.height),2),t=n[0],r=n[1];switch(e.mouseButton){case e.LEFT:d[T(t,r)]=1;break;case e.RIGHT:d[T(t,r)]=0}}var o=.01*N;c.a?j[0]-=o:c.d&&(j[0]+=o),c.w?j[1]+=o:c.s&&(j[1]-=o)}(),a()}},B=(0,t(702).default)((function(){return Promise.all([t.e(270),t.e(864)]).then(t.bind(t,864)).then((function(e){return e.ReactP5Wrapper}))}),{loadableGenerated:{webpack:function(){return[864]}},ssr:!1}),G=function(){return(0,a.jsx)(B,{sketch:I})},D=t(4399),H=function(){return(0,a.jsxs)("div",{className:"m-4 flex flex-col w-full",children:[(0,a.jsx)("h1",{className:"text-3xl",children:"Conway's Game of Life"}),(0,a.jsx)("div",{className:"my-5 flex-grow",children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-5",children:[(0,a.jsx)("button",{className:"bg-stone-800 btn py-1 px-3 rounded",onClick:function(){return S()},children:"Clear"}),(0,a.jsx)("button",{className:"bg-stone-800 btn py-1 px-3 rounded",onClick:function(){return A()},children:"Reset Position"}),(0,a.jsx)("button",{className:"bg-stone-800 btn py-1 px-3 rounded",onClick:function(){return P()},children:"Randomize"}),(0,a.jsx)("button",{className:"bg-stone-800 btn py-1 px-3 rounded",onClick:function(){return O()},children:"Toggle Loop"}),(0,a.jsx)("button",{className:"bg-stone-800 btn py-1 px-3 rounded",onClick:function(){return function(){var e=JSON.stringify(b),n=new Blob([e],{type:"application/json"}),t=URL.createObjectURL(n),r=document.createElement("a");r.href=t,r.download="cells.json",r.click()}()},children:"Save region to file"}),(0,a.jsx)("button",{className:"bg-stone-800 btn py-1 px-3 rounded",onClick:function(){return function(){var e=document.createElement("input");e.type="file",e.accept="application/json",e.onchange=function(){if(e.files){var n=e.files[0],t=new FileReader;t.onload=function(){var e=JSON.parse(t.result);b=e},t.readAsText(n)}},e.click()}()},children:"Load region from file"})]})}),(0,a.jsxs)("div",{className:"flex-shrink flex gap-x-3 flex-row-reverse",children:[(0,a.jsx)("button",{className:"bg-stone-800 btn py-2 px-2 rounded",onClick:function(){return Y(1,.5,.5)},children:(0,a.jsx)(D.I$P,{})}),(0,a.jsx)("button",{className:"bg-stone-800 btn py-2 px-2 rounded",onClick:function(){return Y(-1,.5,.5)},children:(0,a.jsx)(D.SxY,{})})]})]})},W=function(){return(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(G,{}),(0,a.jsx)(H,{})]})}}},function(e){e.O(0,[598,656,22,774,888,179],(function(){return n=1105,e(e.s=n);var n}));var n=e.O();_N_E=n}]);